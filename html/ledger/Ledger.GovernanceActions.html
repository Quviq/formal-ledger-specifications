<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.GovernanceActions</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Background">\section{Governance actions}
\label{sec:governance-actions}
We introduce three distinct bodies that have specific functions in the new governance framework:
\begin{enumerate}
\item
  a constitutional committee  (henceforth called \AgdaInductiveConstructor{CC})
\item
  a group of delegate representatives (henceforth called \AgdaInductiveConstructor{DReps})
\item
  the stake pool operators (henceforth called \AgdaInductiveConstructor{SPOs})
\end{enumerate}
</a><a id="460" class="Markup">\begin{code}[hide]</a>
<a id="479" class="Symbol">{-#</a> <a id="483" class="Keyword">OPTIONS</a> <a id="491" class="Pragma">--safe</a> <a id="498" class="Symbol">#-}</a>
<a id="502" class="Keyword">open</a> <a id="507" class="Keyword">import</a> <a id="514" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>

<a id="529" class="Keyword">open</a> <a id="534" class="Keyword">import</a> <a id="541" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="556" class="Keyword">hiding</a> <a id="563" class="Symbol">(</a><a id="564" href="Relation.Nullary.Decidable.Core.html#1613" class="InductiveConstructor">yes</a><a id="567" class="Symbol">;</a> <a id="569" href="Relation.Nullary.Decidable.Core.html#1650" class="InductiveConstructor">no</a><a id="571" class="Symbol">)</a>
<a id="573" class="Keyword">open</a> <a id="578" class="Keyword">import</a> <a id="585" href="Ledger.Epoch.html" class="Module">Ledger.Epoch</a>

<a id="599" class="Keyword">import</a> <a id="606" href="Ledger.PParams.html" class="Module">Ledger.PParams</a> <a id="621" class="Symbol">as</a> <a id="624" class="Module">PP</a>

<a id="628" class="Keyword">open</a> <a id="633" class="Keyword">import</a> <a id="640" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="649" class="Keyword">using</a> <a id="655" class="Symbol">(</a><a id="656" href="Data.Nat.Base.html#1535" class="Datatype Operator">_≤_</a><a id="659" class="Symbol">)</a>
<a id="661" class="Keyword">open</a> <a id="666" class="Keyword">import</a> <a id="673" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="693" class="Keyword">using</a> <a id="699" class="Symbol">(</a><a id="700" href="Data.Nat.Properties.html#16466" class="Function">+-0-commutativeMonoid</a><a id="721" class="Symbol">;</a> <a id="723" href="Data.Nat.Properties.html#16387" class="Function">+-0-monoid</a><a id="733" class="Symbol">)</a>
<a id="735" class="Keyword">open</a> <a id="740" class="Keyword">import</a> <a id="747" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="761" class="Keyword">using</a> <a id="767" class="Symbol">(</a><a id="768" href="Data.Rational.Base.html#1287" class="Record">ℚ</a><a id="769" class="Symbol">;</a> <a id="771" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a><a id="773" class="Symbol">;</a> <a id="775" href="Data.Rational.Base.html#4234" class="Function">1ℚ</a><a id="777" class="Symbol">)</a>

<a id="780" class="Keyword">module</a> <a id="787" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a> <a id="812" class="Symbol">(</a><a id="813" href="Ledger.GovernanceActions.html#813" class="Bound">TxId</a> <a id="818" href="Ledger.GovernanceActions.html#818" class="Bound">Network</a> <a id="826" href="Ledger.GovernanceActions.html#826" class="Bound">DocHash</a> <a id="834" class="Symbol">:</a> <a id="836" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="839" class="Symbol">)</a>
                                <a id="873" class="Symbol">(</a><a id="874" href="Ledger.GovernanceActions.html#874" class="Bound">es</a> <a id="877" class="Symbol">:</a> <a id="879" href="Ledger.Epoch.html#526" class="Record">EpochStructure</a><a id="893" class="Symbol">)</a>
                                <a id="927" class="Symbol">(</a><a id="928" href="Ledger.GovernanceActions.html#928" class="Bound">ppd</a> <a id="932" class="Symbol">:</a> <a id="934" href="Ledger.PParams.html#5164" class="Record">PP.PParamsDiff</a> <a id="949" href="Ledger.GovernanceActions.html#874" class="Bound">es</a><a id="951" class="Symbol">)</a>
                                <a id="985" class="Symbol">(</a><a id="986" href="Ledger.GovernanceActions.html#986" class="Bound">ppHashable</a> <a id="997" class="Symbol">:</a> <a id="999" href="Ledger.Crypto.html#190" class="Record">isHashableSet</a> <a id="1013" class="Symbol">(</a><a id="1014" href="Ledger.PParams.html#1053" class="Record">PP.PParams</a> <a id="1025" href="Ledger.GovernanceActions.html#874" class="Bound">es</a><a id="1027" class="Symbol">))</a>
                                <a id="1062" class="Symbol">(</a><a id="1063" href="Ledger.GovernanceActions.html#1063" class="Bound">crypto</a> <a id="1070" class="Symbol">:</a> <a id="1072" href="Ledger.Crypto.html#1628" class="Record">Crypto</a><a id="1078" class="Symbol">)</a> <a id="1080" class="Symbol">⦃</a> <a id="1082" href="Ledger.GovernanceActions.html#1082" class="Bound">_</a> <a id="1084" class="Symbol">:</a> <a id="1086" href="Interface.DecEq.html#185" class="Record">DecEq</a> <a id="1092" href="Ledger.GovernanceActions.html#818" class="Bound">Network</a> <a id="1100" class="Symbol">⦄</a> <a id="1102" class="Keyword">where</a>

<a id="1109" class="Keyword">open</a> <a id="1114" href="Ledger.Epoch.html#526" class="Module">EpochStructure</a> <a id="1129" href="Ledger.GovernanceActions.html#874" class="Bound">es</a>
<a id="1132" class="Keyword">open</a> <a id="1137" href="Ledger.Crypto.html#1628" class="Module">Crypto</a> <a id="1144" href="Ledger.GovernanceActions.html#1063" class="Bound">crypto</a>

<a id="1152" class="Keyword">open</a> <a id="1157" class="Keyword">import</a> <a id="1164" href="Ledger.Address.html" class="Module">Ledger.Address</a> <a id="1179" href="Ledger.GovernanceActions.html#818" class="Bound">Network</a> <a id="1187" href="Ledger.Crypto.html#1812" class="Function">KeyHash</a> <a id="1195" href="Ledger.Crypto.html#1750" class="Function">ScriptHash</a>

<a id="1207" class="Keyword">open</a> <a id="1212" href="Ledger.PParams.html" class="Module">PP</a> <a id="1215" href="Ledger.GovernanceActions.html#874" class="Bound">es</a>
<a id="1218" class="Keyword">open</a> <a id="1223" href="Ledger.PParams.html#5164" class="Module">PParamsDiff</a> <a id="1235" href="Ledger.GovernanceActions.html#928" class="Bound">ppd</a>
<a id="1239" class="Keyword">open</a> <a id="1244" href="Ledger.Crypto.html#190" class="Module">isHashableSet</a> <a id="1258" href="Ledger.GovernanceActions.html#986" class="Bound">ppHashable</a> <a id="1269" class="Keyword">renaming</a> <a id="1278" class="Symbol">(</a><a id="1279" href="Ledger.Crypto.html#235" class="Field">THash</a> <a id="1285" class="Symbol">to</a> <a id="1288" class="Field">PPHash</a><a id="1294" class="Symbol">)</a>

<a id="1297" class="Keyword">open</a> <a id="1302" class="Keyword">import</a> <a id="1309" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>
<a id="1329" class="Keyword">open</a> <a id="1334" class="Keyword">import</a> <a id="1341" href="MyDebugOptions.html" class="Module">MyDebugOptions</a>

<a id="2ℚ"></a><a id="1357" href="Ledger.GovernanceActions.html#1357" class="Function">2ℚ</a> <a id="1360" class="Symbol">=</a> <a id="1362" href="Data.Rational.Base.html#4234" class="Function">1ℚ</a> <a id="1365" href="Data.Rational.Base.html#5985" class="Function Operator">Data.Rational.+</a> <a id="1381" href="Data.Rational.Base.html#4234" class="Function">1ℚ</a>
<a id="1384" class="Markup">\end{code}</a><a id="1394" class="Background">
\begin{figure*}[h]
{\small
</a><a id="1422" class="Markup">\begin{code}</a>
<a id="GovActionID"></a><a id="1435" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a> <a id="1447" class="Symbol">:</a> <a id="1449" href="Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="1453" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a> <a id="1465" class="Symbol">=</a> <a id="1467" href="Ledger.GovernanceActions.html#813" class="Bound">TxId</a> <a id="1472" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="1474" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>

<a id="1477" class="Keyword">data</a> <a id="GovRole"></a><a id="1482" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a> <a id="1490" class="Symbol">:</a> <a id="1492" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1496" class="Keyword">where</a>
  <a id="GovRole.CC"></a><a id="1504" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a>    <a id="1510" class="Symbol">:</a> <a id="1512" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a>
  <a id="GovRole.DRep"></a><a id="1522" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a>  <a id="1528" class="Symbol">:</a> <a id="1530" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a>
  <a id="GovRole.SPO"></a><a id="1540" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a>   <a id="1546" class="Symbol">:</a> <a id="1548" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a>

<a id="1557" class="Keyword">data</a> <a id="VDeleg"></a><a id="1562" href="Ledger.GovernanceActions.html#1562" class="Datatype">VDeleg</a> <a id="1569" class="Symbol">:</a> <a id="1571" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1575" class="Keyword">where</a>
  <a id="VDeleg.credVoter"></a><a id="1583" href="Ledger.GovernanceActions.html#1583" class="InductiveConstructor">credVoter</a>        <a id="1600" class="Symbol">:</a> <a id="1602" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a> <a id="1610" class="Symbol">→</a> <a id="1612" href="Ledger.Address.html#740" class="Function">Credential</a> <a id="1623" class="Symbol">→</a> <a id="1625" href="Ledger.GovernanceActions.html#1562" class="Datatype">VDeleg</a>
  <a id="VDeleg.abstainRep"></a><a id="1634" href="Ledger.GovernanceActions.html#1634" class="InductiveConstructor">abstainRep</a>       <a id="1651" class="Symbol">:</a> <a id="1653" href="Ledger.GovernanceActions.html#1562" class="Datatype">VDeleg</a>
  <a id="VDeleg.noConfidenceRep"></a><a id="1662" href="Ledger.GovernanceActions.html#1662" class="InductiveConstructor">noConfidenceRep</a>  <a id="1679" class="Symbol">:</a> <a id="1681" href="Ledger.GovernanceActions.html#1562" class="Datatype">VDeleg</a>

<a id="1689" class="Keyword">record</a> <a id="Anchor"></a><a id="1696" href="Ledger.GovernanceActions.html#1696" class="Record">Anchor</a> <a id="1703" class="Symbol">:</a> <a id="1705" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1709" class="Keyword">where</a>
  <a id="1717" class="Keyword">field</a>  <a id="Anchor.url"></a><a id="1724" href="Ledger.GovernanceActions.html#1724" class="Field">url</a>   <a id="1730" class="Symbol">:</a> <a id="1732" href="Agda.Builtin.String.html#318" class="Postulate">String</a>
         <a id="Anchor.hash"></a><a id="1748" href="Ledger.GovernanceActions.html#1748" class="Field">hash</a>  <a id="1754" class="Symbol">:</a> <a id="1756" href="Ledger.GovernanceActions.html#826" class="Bound">DocHash</a>

<a id="1765" class="Keyword">data</a> <a id="GovAction"></a><a id="1770" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a> <a id="1780" class="Symbol">:</a> <a id="1782" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1786" class="Keyword">where</a>
  <a id="GovAction.NoConfidence"></a><a id="1794" href="Ledger.GovernanceActions.html#1794" class="InductiveConstructor">NoConfidence</a>     <a id="1811" class="Symbol">:</a>                                    <a id="1848" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
  <a id="GovAction.NewCommittee"></a><a id="1860" href="Ledger.GovernanceActions.html#1860" class="InductiveConstructor">NewCommittee</a>     <a id="1877" class="Symbol">:</a> <a id="1879" href="Ledger.Crypto.html#1812" class="Function">KeyHash</a> <a id="1887" href="Ledger.Prelude.html#2585" class="Function Operator">⇀</a> <a id="1889" href="Ledger.Epoch.html#593" class="Function">Epoch</a> <a id="1895" class="Symbol">→</a> <a id="1897" href="Ledger.Prelude.html#1583" class="Function Operator">ℙ</a> <a id="1899" href="Ledger.Crypto.html#1812" class="Function">KeyHash</a> <a id="1907" class="Symbol">→</a> <a id="1909" href="Data.Rational.Base.html#1287" class="Record">ℚ</a>  <a id="1912" class="Symbol">→</a> <a id="1914" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
  <a id="GovAction.NewConstitution"></a><a id="1926" href="Ledger.GovernanceActions.html#1926" class="InductiveConstructor">NewConstitution</a>  <a id="1943" class="Symbol">:</a> <a id="1945" href="Ledger.GovernanceActions.html#826" class="Bound">DocHash</a>                          <a id="1978" class="Symbol">→</a> <a id="1980" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
  <a id="GovAction.TriggerHF"></a><a id="1992" href="Ledger.GovernanceActions.html#1992" class="InductiveConstructor">TriggerHF</a>        <a id="2009" class="Symbol">:</a> <a id="2011" href="Ledger.PParams.html#692" class="Function">ProtVer</a>                          <a id="2044" class="Symbol">→</a> <a id="2046" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
  <a id="GovAction.ChangePParams"></a><a id="2058" href="Ledger.GovernanceActions.html#2058" class="InductiveConstructor">ChangePParams</a>    <a id="2075" class="Symbol">:</a> <a id="2077" href="Ledger.PParams.html#5197" class="Function">UpdateT</a> <a id="2085" class="Symbol">→</a> <a id="2087" href="Ledger.GovernanceActions.html#1288" class="Function">PPHash</a>                 <a id="2110" class="Symbol">→</a> <a id="2112" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
  <a id="GovAction.TreasuryWdrl"></a><a id="2124" href="Ledger.GovernanceActions.html#2124" class="InductiveConstructor">TreasuryWdrl</a>     <a id="2141" class="Symbol">:</a> <a id="2143" class="Symbol">(</a><a id="2144" href="Ledger.Address.html#1243" class="Record">RwdAddr</a> <a id="2152" href="Ledger.Prelude.html#2585" class="Function Operator">⇀</a> <a id="2154" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a><a id="2158" class="Symbol">)</a>                 <a id="2176" class="Symbol">→</a> <a id="2178" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
  <a id="GovAction.Info"></a><a id="2190" href="Ledger.GovernanceActions.html#2190" class="InductiveConstructor">Info</a>             <a id="2207" class="Symbol">:</a>                                    <a id="2244" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
<a id="2254" class="Markup">\end{code}</a><a id="2264" class="Background">
} %% end small
\caption{Governance actions}
\label{defs:governance}
\end{figure*}
Figure~\ref{defs:governance} defines several data types used to represent governance actions including:
\begin{itemize}
  \item \defn{identifier}---a pair consisting of
        a \AgdaDatatype{TxId} (transaction ID) and a natural number;
  \item \defn{role}---one of three available voter roles defined above (\AgdaInductiveConstructor{CC}, \AgdaInductiveConstructor{DRep}, \AgdaInductiveConstructor{SPO});
  \item \defn{voter delegation type}---one of three ways to delegate votes: by credential, abstention, or no confidence (\AgdaInductiveConstructor{credVoter}, \AgdaInductiveConstructor{abstainRep}, or \AgdaInductiveConstructor{noConfidenceRep});
  \item \defn{anchor}---a url and a document hash;
  \item \defn{governance action}---one of seven possible actions
        % : \AgdaInductiveConstructor{NoConfidence}, \AgdaInductiveConstructor{NewCommittee},
        % \AgdaInductiveConstructor{NewConstitution}, \AgdaInductiveConstructor{TriggerHF},
        % \AgdaInductiveConstructor{ChangePParams}, \AgdaInductiveConstructor{TreasuryWdrl},
        % \AgdaInductiveConstructor{Info}
        (see Figure~\ref{fig:types-of-governance-actions} for definitions).
\end{itemize}
\begin{figure*}[h]
\begin{longtable}[]{@{}
 &gt;{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.2}}
 &gt;{\raggedright\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.75}}@{}}
\textbf{Action}  &amp; \textbf{Description}\\
\hline
\endhead
\AgdaInductiveConstructor{NoConfidence}            &amp; a motion to create a \defn{state of no-confidence} in the current constitutional committee \\[10pt]
\AgdaInductiveConstructor{NewCommittee}            &amp; changes to the members of the constitutional committee and/or to its signature threshold and/or term limits \\[10pt]
\AgdaInductiveConstructor{NewConstitution}         &amp; a modification to the off-chain Constitution, recorded as an on-chain hash of the text document \\[10pt]
\AgdaInductiveConstructor{TriggerHF}\footnotemark  &amp; triggers a non-backwards compatible upgrade of the network; requires a prior software upgrade  \\[10pt]
\AgdaInductiveConstructor{ChangePParams}           &amp; a change to \textit{one or more} updatable protocol parameters, excluding changes to major protocol versions (``hard forks&#39;&#39;)\\[10pt]
\AgdaInductiveConstructor{TreasuryWdrl}            &amp; movements from the treasury, sub-categorized into small, medium or large withdrawals (based on the amount of Lovelace to be withdrawn)\\[10pt]
\AgdaInductiveConstructor{Info}                    &amp; an action that has no effect on-chain, other than an on-chain record
\end{longtable}
\caption{Types of governance actions}
\label{fig:types-of-governance-actions}
\end{figure*}
\footnotetext{There are many varying definitions of the term ``hard fork&#39;&#39; in the blockchain industry. Hard forks typically refer
  to non-backwards compatible updates of a network. In Cardano, we formalize the definition slightly more by calling any upgrade that
  would lead to \emph{more blocks} being validated a ``hard fork&#39;&#39; and force nodes to comply with the new protocol version, effectively
  obsoleting nodes that are unable to handle the upgrade.}
</a><a id="5495" class="Markup">\begin{code}[hide]</a>
<a id="actionWellFormed"></a><a id="5514" href="Ledger.GovernanceActions.html#5514" class="Function">actionWellFormed</a> <a id="5531" class="Symbol">:</a> <a id="5533" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a> <a id="5543" class="Symbol">→</a> <a id="5545" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="5550" href="Ledger.GovernanceActions.html#5514" class="Function">actionWellFormed</a> <a id="5567" class="Symbol">(</a><a id="5568" href="Ledger.GovernanceActions.html#2058" class="InductiveConstructor">ChangePParams</a> <a id="5582" href="Ledger.GovernanceActions.html#5582" class="Bound">x</a> <a id="5584" class="Symbol">_)</a> <a id="5587" class="Symbol">=</a> <a id="5589" href="Ledger.PParams.html#5316" class="Function">ppdWellFormed</a> <a id="5603" href="Ledger.GovernanceActions.html#5582" class="Bound">x</a>
<a id="5605" href="Ledger.GovernanceActions.html#5514" class="CatchallClause Function">actionWellFormed</a><a id="5621" class="CatchallClause"> </a><a id="5622" class="CatchallClause Symbol">_</a>                   <a id="5642" class="Symbol">=</a> <a id="5644" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>

<a id="maximum"></a><a id="5650" href="Ledger.GovernanceActions.html#5650" class="Function">maximum</a> <a id="5658" class="Symbol">:</a> <a id="5660" href="Ledger.Prelude.html#1583" class="Function Operator">ℙ</a> <a id="5662" href="Data.Rational.Base.html#1287" class="Record">ℚ</a> <a id="5664" class="Symbol">→</a> <a id="5666" href="Data.Rational.Base.html#1287" class="Record">ℚ</a>
<a id="5668" href="Ledger.GovernanceActions.html#5650" class="Function">maximum</a> <a id="5676" href="Ledger.GovernanceActions.html#5676" class="Bound">x</a> <a id="5678" class="Symbol">=</a> <a id="5680" href="Data.List.Base.html#4412" class="Function">foldl</a> <a id="5686" href="Data.Rational.Base.html#6555" class="Function Operator">Data.Rational._⊔_</a> <a id="5704" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a> <a id="5707" class="Symbol">(</a><a id="5708" href="Data.Product.Base.html#608" class="Field">proj₁</a> <a id="5714" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="5716" href="Ledger.Prelude.html#1753" class="Function">finiteness</a> <a id="5727" href="Ledger.GovernanceActions.html#5676" class="Bound">x</a><a id="5728" class="Symbol">)</a>

<a id="5731" class="Keyword">module</a> <a id="5738" href="Ledger.GovernanceActions.html#5738" class="Module">_</a> <a id="5740" class="Symbol">(</a><a id="5741" href="Ledger.GovernanceActions.html#5741" class="Bound">pp</a> <a id="5744" class="Symbol">:</a> <a id="5746" href="Ledger.PParams.html#1053" class="Record">PParams</a><a id="5753" class="Symbol">)</a> <a id="5755" class="Symbol">(</a><a id="5756" href="Ledger.GovernanceActions.html#5756" class="Bound">ccThreshold&#39;</a> <a id="5769" class="Symbol">:</a> <a id="5771" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="5777" href="Data.Rational.Base.html#1287" class="Record">ℚ</a><a id="5778" class="Symbol">)</a> <a id="5780" class="Keyword">where</a>
  <a id="5788" class="Keyword">open</a> <a id="5793" href="Ledger.PParams.html#1053" class="Module">PParams</a> <a id="5801" href="Ledger.GovernanceActions.html#5741" class="Bound">pp</a>
  <a id="5806" class="Keyword">open</a> <a id="5811" href="Ledger.PParams.html#909" class="Module">DrepThresholds</a> <a id="5826" href="Ledger.PParams.html#1941" class="Function">drepThresholds</a>
  <a id="5843" class="Keyword">open</a> <a id="5848" href="Ledger.PParams.html#992" class="Module">PoolThresholds</a> <a id="5863" href="Ledger.PParams.html#1985" class="Function">poolThresholds</a>

  <a id="5881" class="Comment">-- Here, 2 can just be any number strictly greater than one. It just</a>
  <a id="5952" class="Comment">-- means that a threshold can never be cleared, i.e. that the action</a>
  <a id="6023" class="Comment">-- cannot be enacted.</a>

  <a id="6048" class="Keyword">private</a>
    <a id="6060" href="Ledger.GovernanceActions.html#6060" class="Function">ccThreshold</a> <a id="6072" class="Symbol">:</a> <a id="6074" href="Data.Rational.Base.html#1287" class="Record">ℚ</a>
    <a id="6080" href="Ledger.GovernanceActions.html#6060" class="Function">ccThreshold</a> <a id="6092" class="Symbol">=</a> <a id="6094" href="Function.Base.html#4053" class="Function Operator">case</a> <a id="6099" href="Ledger.GovernanceActions.html#5756" class="Bound">ccThreshold&#39;</a> <a id="6112" href="Function.Base.html#4053" class="Function Operator">of</a> <a id="6115" class="Symbol">λ</a> <a id="6117" class="Keyword">where</a>
      <a id="6129" class="Symbol">(</a><a id="6130" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="6135" href="Ledger.GovernanceActions.html#6135" class="Bound">x</a><a id="6136" class="Symbol">)</a> <a id="6138" class="Symbol">→</a> <a id="6140" href="Ledger.GovernanceActions.html#6135" class="Bound">x</a>
      <a id="6148" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="6157" class="Symbol">→</a> <a id="6159" href="Ledger.GovernanceActions.html#1357" class="Function">2ℚ</a>

    <a id="6167" href="Ledger.GovernanceActions.html#6167" class="Function">pparamThreshold</a> <a id="6183" class="Symbol">:</a> <a id="6185" href="Ledger.PParams.html#803" class="Datatype">PParamGroup</a> <a id="6197" class="Symbol">→</a> <a id="6199" href="Data.Rational.Base.html#1287" class="Record">ℚ</a>
    <a id="6205" href="Ledger.GovernanceActions.html#6167" class="Function">pparamThreshold</a> <a id="6221" href="Ledger.PParams.html#829" class="InductiveConstructor">NetworkGroup</a>    <a id="6237" class="Symbol">=</a> <a id="6239" href="Ledger.PParams.html#961" class="Function">P5a</a>
    <a id="6247" href="Ledger.GovernanceActions.html#6167" class="Function">pparamThreshold</a> <a id="6263" href="Ledger.PParams.html#842" class="InductiveConstructor">EconomicGroup</a>   <a id="6279" class="Symbol">=</a> <a id="6281" href="Ledger.PParams.html#965" class="Function">P5b</a>
    <a id="6289" href="Ledger.GovernanceActions.html#6167" class="Function">pparamThreshold</a> <a id="6305" href="Ledger.PParams.html#856" class="InductiveConstructor">TechnicalGroup</a>  <a id="6321" class="Symbol">=</a> <a id="6323" href="Ledger.PParams.html#969" class="Function">P5c</a>
    <a id="6331" href="Ledger.GovernanceActions.html#6167" class="Function">pparamThreshold</a> <a id="6347" href="Ledger.PParams.html#871" class="InductiveConstructor">GovernanceGroup</a> <a id="6363" class="Symbol">=</a> <a id="6365" href="Ledger.PParams.html#973" class="Function">P5d</a>

    <a id="6374" href="Ledger.GovernanceActions.html#6374" class="Function">P5</a> <a id="6377" class="Symbol">:</a> <a id="6379" href="Ledger.PParams.html#5197" class="Function">UpdateT</a> <a id="6387" class="Symbol">→</a> <a id="6389" href="Data.Rational.Base.html#1287" class="Record">ℚ</a>
    <a id="6395" href="Ledger.GovernanceActions.html#6374" class="Function">P5</a> <a id="6398" href="Ledger.GovernanceActions.html#6398" class="Bound">ppu</a> <a id="6402" class="Symbol">=</a> <a id="6404" href="Ledger.GovernanceActions.html#5650" class="Function">maximum</a> <a id="6412" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="6414" href="Axiom.Set.html#4924" class="Function">map</a> <a id="6418" href="Ledger.GovernanceActions.html#6167" class="Function">pparamThreshold</a> <a id="6434" class="Symbol">(</a><a id="6435" href="Ledger.PParams.html#5219" class="Function">updateGroups</a> <a id="6448" href="Ledger.GovernanceActions.html#6398" class="Bound">ppu</a><a id="6451" class="Symbol">)</a>

  <a id="6456" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="6466" class="Symbol">:</a> <a id="6468" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a> <a id="6478" class="Symbol">→</a> <a id="6480" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a> <a id="6488" class="Symbol">→</a> <a id="6490" href="Data.Rational.Base.html#1287" class="Record">ℚ</a>
  <a id="6494" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="6504" href="Ledger.GovernanceActions.html#1794" class="InductiveConstructor">NoConfidence</a>         <a id="6525" class="Symbol">=</a> <a id="6527" class="Symbol">λ</a> <a id="6529" class="Symbol">{</a> <a id="6531" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="6534" class="Symbol">→</a> <a id="6536" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a>          <a id="6548" class="Symbol">;</a> <a id="6550" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="6555" class="Symbol">→</a> <a id="6557" href="Ledger.PParams.html#944" class="Function">P1</a>   <a id="6562" class="Symbol">;</a> <a id="6564" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="6568" class="Symbol">→</a> <a id="6570" href="Ledger.PParams.html#1027" class="Function">Q1</a> <a id="6573" class="Symbol">}</a>
  <a id="6577" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="6587" class="Symbol">(</a><a id="6588" href="Ledger.GovernanceActions.html#1860" class="InductiveConstructor">NewCommittee</a> <a id="6601" class="Symbol">_</a> <a id="6603" class="Symbol">_</a> <a id="6605" class="Symbol">_)</a> <a id="6608" class="Symbol">=</a> <a id="6610" href="Function.Base.html#4053" class="Function Operator">case</a> <a id="6615" href="Ledger.GovernanceActions.html#5756" class="Bound">ccThreshold&#39;</a> <a id="6628" href="Function.Base.html#4053" class="Function Operator">of</a> <a id="6631" class="Symbol">λ</a> <a id="6633" class="Keyword">where</a>
                        <a id="6663" class="Symbol">(</a><a id="6664" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="6669" class="Symbol">_)</a> <a id="6672" class="Symbol">→</a> <a id="6674" class="Symbol">λ</a> <a id="6676" class="Symbol">{</a> <a id="6678" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="6681" class="Symbol">→</a> <a id="6683" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a>          <a id="6695" class="Symbol">;</a> <a id="6697" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="6702" class="Symbol">→</a> <a id="6704" href="Ledger.PParams.html#947" class="Function">P2a</a>  <a id="6709" class="Symbol">;</a> <a id="6711" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="6715" class="Symbol">→</a> <a id="6717" href="Ledger.PParams.html#1030" class="Function">Q2a</a> <a id="6721" class="Symbol">}</a>
                        <a id="6747" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="6756" class="Symbol">→</a> <a id="6758" class="Symbol">λ</a> <a id="6760" class="Symbol">{</a> <a id="6762" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="6765" class="Symbol">→</a> <a id="6767" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a>          <a id="6779" class="Symbol">;</a> <a id="6781" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="6786" class="Symbol">→</a> <a id="6788" href="Ledger.PParams.html#951" class="Function">P2b</a>  <a id="6793" class="Symbol">;</a> <a id="6795" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="6799" class="Symbol">→</a> <a id="6801" href="Ledger.PParams.html#1034" class="Function">Q2b</a> <a id="6805" class="Symbol">}</a>
  <a id="6809" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="6819" class="Symbol">(</a><a id="6820" href="Ledger.GovernanceActions.html#1926" class="InductiveConstructor">NewConstitution</a> <a id="6836" class="Symbol">_)</a>  <a id="6840" class="Symbol">=</a> <a id="6842" class="Symbol">λ</a> <a id="6844" class="Symbol">{</a> <a id="6846" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="6849" class="Symbol">→</a> <a id="6851" href="Ledger.GovernanceActions.html#6060" class="Function">ccThreshold</a> <a id="6863" class="Symbol">;</a> <a id="6865" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="6870" class="Symbol">→</a> <a id="6872" href="Ledger.PParams.html#955" class="Function">P3</a>   <a id="6877" class="Symbol">;</a> <a id="6879" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="6883" class="Symbol">→</a> <a id="6885" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a> <a id="6888" class="Symbol">}</a>
  <a id="6892" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="6902" class="Symbol">(</a><a id="6903" href="Ledger.GovernanceActions.html#1992" class="InductiveConstructor">TriggerHF</a> <a id="6913" class="Symbol">_)</a>        <a id="6923" class="Symbol">=</a> <a id="6925" class="Symbol">λ</a> <a id="6927" class="Symbol">{</a> <a id="6929" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="6932" class="Symbol">→</a> <a id="6934" href="Ledger.GovernanceActions.html#6060" class="Function">ccThreshold</a> <a id="6946" class="Symbol">;</a> <a id="6948" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="6953" class="Symbol">→</a> <a id="6955" href="Ledger.PParams.html#958" class="Function">P4</a>   <a id="6960" class="Symbol">;</a> <a id="6962" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="6966" class="Symbol">→</a> <a id="6968" href="Ledger.PParams.html#1038" class="Function">Q4</a> <a id="6971" class="Symbol">}</a>
  <a id="6975" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="6985" class="Symbol">(</a><a id="6986" href="Ledger.GovernanceActions.html#2058" class="InductiveConstructor">ChangePParams</a> <a id="7000" href="Ledger.GovernanceActions.html#7000" class="Bound">x</a> <a id="7002" class="Symbol">_)</a>  <a id="7006" class="Symbol">=</a> <a id="7008" class="Symbol">λ</a> <a id="7010" class="Symbol">{</a> <a id="7012" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="7015" class="Symbol">→</a> <a id="7017" href="Ledger.GovernanceActions.html#6060" class="Function">ccThreshold</a> <a id="7029" class="Symbol">;</a> <a id="7031" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="7036" class="Symbol">→</a> <a id="7038" href="Ledger.GovernanceActions.html#6374" class="Function">P5</a> <a id="7041" href="Ledger.GovernanceActions.html#7000" class="Bound">x</a> <a id="7043" class="Symbol">;</a> <a id="7045" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="7049" class="Symbol">→</a> <a id="7051" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a> <a id="7054" class="Symbol">}</a>
  <a id="7058" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="7068" class="Symbol">(</a><a id="7069" href="Ledger.GovernanceActions.html#2124" class="InductiveConstructor">TreasuryWdrl</a> <a id="7082" class="Symbol">_)</a>     <a id="7089" class="Symbol">=</a> <a id="7091" class="Symbol">λ</a> <a id="7093" class="Symbol">{</a> <a id="7095" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="7098" class="Symbol">→</a> <a id="7100" href="Ledger.GovernanceActions.html#6060" class="Function">ccThreshold</a> <a id="7112" class="Symbol">;</a> <a id="7114" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="7119" class="Symbol">→</a> <a id="7121" href="Ledger.PParams.html#977" class="Function">P6</a>   <a id="7126" class="Symbol">;</a> <a id="7128" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="7132" class="Symbol">→</a> <a id="7134" href="Data.Rational.Base.html#4213" class="Function">0ℚ</a> <a id="7137" class="Symbol">}</a>
  <a id="7141" href="Ledger.GovernanceActions.html#6456" class="Function">threshold</a> <a id="7151" href="Ledger.GovernanceActions.html#2190" class="InductiveConstructor">Info</a>                 <a id="7172" class="Symbol">=</a> <a id="7174" class="Symbol">λ</a> <a id="7176" class="Symbol">{</a> <a id="7178" href="Ledger.GovernanceActions.html#1504" class="InductiveConstructor">CC</a> <a id="7181" class="Symbol">→</a> <a id="7183" href="Ledger.GovernanceActions.html#1357" class="Function">2ℚ</a>          <a id="7195" class="Symbol">;</a> <a id="7197" href="Ledger.GovernanceActions.html#1522" class="InductiveConstructor">DRep</a> <a id="7202" class="Symbol">→</a> <a id="7204" href="Ledger.GovernanceActions.html#1357" class="Function">2ℚ</a>   <a id="7209" class="Symbol">;</a> <a id="7211" href="Ledger.GovernanceActions.html#1540" class="InductiveConstructor">SPO</a> <a id="7215" class="Symbol">→</a> <a id="7217" href="Ledger.GovernanceActions.html#1357" class="Function">2ℚ</a> <a id="7220" class="Symbol">}</a>
<a id="7222" class="Markup">\end{code}</a><a id="7232" class="Background">
\subsection{Voting and ratification}
\label{sec:voting-and-ratification}
Every governance action must be ratified by at least two of these three bodies using their on-chain \defn{votes}.
The type of action and the state of the governance system determines which bodies must ratify it.
Ratified actions are then \defn{enacted} on-chain, following a set of rules (see Section~\ref{sec:enactment} and Figure~\ref{fig:enactment-types}).
\begin{figure*}[h]
{\small
</a><a id="7693" class="Markup">\begin{code}</a>
<a id="NeedsHash"></a><a id="7706" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="7716" class="Symbol">:</a> <a id="7718" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a> <a id="7728" class="Symbol">→</a> <a id="7730" href="Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="7734" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="7744" href="Ledger.GovernanceActions.html#1794" class="InductiveConstructor">NoConfidence</a>         <a id="7765" class="Symbol">=</a> <a id="7767" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>
<a id="7779" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="7789" class="Symbol">(</a><a id="7790" href="Ledger.GovernanceActions.html#1860" class="InductiveConstructor">NewCommittee</a> <a id="7803" class="Symbol">_</a> <a id="7805" class="Symbol">_</a> <a id="7807" class="Symbol">_)</a> <a id="7810" class="Symbol">=</a> <a id="7812" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>
<a id="7824" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="7834" class="Symbol">(</a><a id="7835" href="Ledger.GovernanceActions.html#1926" class="InductiveConstructor">NewConstitution</a> <a id="7851" class="Symbol">_)</a>  <a id="7855" class="Symbol">=</a> <a id="7857" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>
<a id="7869" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="7879" class="Symbol">(</a><a id="7880" href="Ledger.GovernanceActions.html#1992" class="InductiveConstructor">TriggerHF</a> <a id="7890" class="Symbol">_)</a>        <a id="7900" class="Symbol">=</a> <a id="7902" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>
<a id="7914" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="7924" class="Symbol">(</a><a id="7925" href="Ledger.GovernanceActions.html#2058" class="InductiveConstructor">ChangePParams</a> <a id="7939" class="Symbol">_</a> <a id="7941" class="Symbol">_)</a>  <a id="7945" class="Symbol">=</a> <a id="7947" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>
<a id="7959" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="7969" class="Symbol">(</a><a id="7970" href="Ledger.GovernanceActions.html#2124" class="InductiveConstructor">TreasuryWdrl</a> <a id="7983" class="Symbol">_)</a>     <a id="7990" class="Symbol">=</a> <a id="7992" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="7994" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="8004" href="Ledger.GovernanceActions.html#2190" class="InductiveConstructor">Info</a>                 <a id="8025" class="Symbol">=</a> <a id="8027" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>

<a id="HashProtected"></a><a id="8030" href="Ledger.GovernanceActions.html#8030" class="Function">HashProtected</a> <a id="8044" class="Symbol">:</a> <a id="8046" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="8050" class="Symbol">→</a> <a id="8052" href="Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="8056" href="Ledger.GovernanceActions.html#8030" class="Function">HashProtected</a> <a id="8070" href="Ledger.GovernanceActions.html#8070" class="Bound">A</a> <a id="8072" class="Symbol">=</a> <a id="8074" href="Ledger.GovernanceActions.html#8070" class="Bound">A</a> <a id="8076" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="8078" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>
<a id="8090" class="Markup">\end{code}</a><a id="8100" class="Background">
} %% end small
\caption{NeedsHash and HashProtected types}
\label{fig:needshash-and-hashprotected-types}
\end{figure*}
Figure~\ref{fig:needshash-and-hashprotected-types} defines types that are used in
ratification (for verifyPrev) where we check that the stored hash matches the one
attached to the action we want to ratify.
\begin{itemize}
\item
  \defn{Ratification}. An action is said to be \defn{ratified} when it gathers enough votes in its favor
  (according to the rules described in Section~\ref{sec:ratification}).
\item
  \defn{Expiration}. An action that doesn&#39;t collect sufficient `yes&#39; votes before its deadline is said to have \defn{expired}.
\item
  \defn{Enactment}. An action that has been ratified is said to be \defn{enacted} once it has been activated on the network.
\end{itemize}
See Section~\ref{sec:ratification} for more on the ratification process.

\begin{figure*}[h]
{\small
</a><a id="9004" class="Markup">\begin{code}</a>
<a id="9017" class="Keyword">data</a> <a id="Vote"></a><a id="9022" href="Ledger.GovernanceActions.html#9022" class="Datatype">Vote</a> <a id="9027" class="Symbol">:</a> <a id="9029" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="9033" class="Keyword">where</a>
  <a id="Vote.yes"></a><a id="9041" href="Ledger.GovernanceActions.html#9041" class="InductiveConstructor">yes</a>      <a id="9050" class="Symbol">:</a> <a id="9052" href="Ledger.GovernanceActions.html#9022" class="Datatype">Vote</a>
  <a id="Vote.no"></a><a id="9059" href="Ledger.GovernanceActions.html#9059" class="InductiveConstructor">no</a>       <a id="9068" class="Symbol">:</a> <a id="9070" href="Ledger.GovernanceActions.html#9022" class="Datatype">Vote</a>
  <a id="Vote.abstain"></a><a id="9077" href="Ledger.GovernanceActions.html#9077" class="InductiveConstructor">abstain</a>  <a id="9086" class="Symbol">:</a> <a id="9088" href="Ledger.GovernanceActions.html#9022" class="Datatype">Vote</a>

<a id="9094" class="Keyword">record</a> <a id="GovVote"></a><a id="9101" href="Ledger.GovernanceActions.html#9101" class="Record">GovVote</a> <a id="9109" class="Symbol">:</a> <a id="9111" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="9115" class="Keyword">where</a>
  <a id="9123" class="Keyword">field</a> <a id="GovVote.gid"></a><a id="9129" href="Ledger.GovernanceActions.html#9129" class="Field">gid</a>         <a id="9141" class="Symbol">:</a> <a id="9143" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>
        <a id="GovVote.role"></a><a id="9163" href="Ledger.GovernanceActions.html#9163" class="Field">role</a>        <a id="9175" class="Symbol">:</a> <a id="9177" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a>
        <a id="GovVote.credential"></a><a id="9193" href="Ledger.GovernanceActions.html#9193" class="Field">credential</a>  <a id="9205" class="Symbol">:</a> <a id="9207" href="Ledger.Address.html#740" class="Function">Credential</a>
        <a id="GovVote.vote"></a><a id="9226" href="Ledger.GovernanceActions.html#9226" class="Field">vote</a>        <a id="9238" class="Symbol">:</a> <a id="9240" href="Ledger.GovernanceActions.html#9022" class="Datatype">Vote</a>
        <a id="GovVote.anchor"></a><a id="9253" href="Ledger.GovernanceActions.html#9253" class="Field">anchor</a>      <a id="9265" class="Symbol">:</a> <a id="9267" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="9273" href="Ledger.GovernanceActions.html#1696" class="Record">Anchor</a>

<a id="9281" class="Keyword">record</a> <a id="GovProposal"></a><a id="9288" href="Ledger.GovernanceActions.html#9288" class="Record">GovProposal</a> <a id="9300" class="Symbol">:</a> <a id="9302" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="9306" class="Keyword">where</a>
  <a id="9314" class="Keyword">field</a> <a id="GovProposal.returnAddr"></a><a id="9320" href="Ledger.GovernanceActions.html#9320" class="Field">returnAddr</a>  <a id="9332" class="Symbol">:</a> <a id="9334" href="Ledger.Address.html#1243" class="Record">RwdAddr</a>
        <a id="GovProposal.action"></a><a id="9350" href="Ledger.GovernanceActions.html#9350" class="Field">action</a>      <a id="9362" class="Symbol">:</a> <a id="9364" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a>
        <a id="GovProposal.prevAction"></a><a id="9382" href="Ledger.GovernanceActions.html#9382" class="Field">prevAction</a>  <a id="9394" class="Symbol">:</a> <a id="9396" href="Ledger.GovernanceActions.html#7706" class="Function">NeedsHash</a> <a id="9406" href="Ledger.GovernanceActions.html#9350" class="Field">action</a>
        <a id="GovProposal.deposit"></a><a id="9421" href="Ledger.GovernanceActions.html#9421" class="Field">deposit</a>     <a id="9433" class="Symbol">:</a> <a id="9435" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
        <a id="GovProposal.anchor"></a><a id="9448" href="Ledger.GovernanceActions.html#9448" class="Field">anchor</a>      <a id="9460" class="Symbol">:</a> <a id="9462" href="Ledger.GovernanceActions.html#1696" class="Record">Anchor</a>
<a id="9469" class="Markup">\end{code}</a><a id="9479" class="Background">
} %% end small
\caption{Governance action proposals and votes}
\label{defs:governance-votes}
\end{figure*}
The data type \AgdaDatatype{Vote} represents the different voting options: `yes&#39;, `no&#39;, or `abstain&#39;.
Each \AgdaField{vote} is recorded in a \AgdaRecord{GovVote} record along with the following data:
a governance action ID, a role, a credential, and an anchor (of types \AgdaDatatype{GovActionID}, \AgdaDatatype{GovRole}, \AgdaDatatype{Credential}, and \AgdaDatatype{Maybe~Anchor}, respectively).

A \defn{governance action proposal} is recorded in a \AgdaRecord{GovProposal} record which includes fields for
a return address, the proposed governance action, a hash of the previous governance action, and an anchor (see Figure~\ref{defs:governance-votes}).

To submit a governance action to the chain one must provide a deposit which will be returned when
the action is finalized (whether it is \defn{ratified} or has \defn{expired}).
The deposit amount will be added to the \defn{deposit pot}, similar to stake key deposits. It will also be
counted towards the stake of the reward address it will be paid back to, to not reduce the submitter&#39;s
voting power to vote on their own (and competing) actions.
\\[4pt]
\textbf{Remarks}.
\begin{enumerate}
\item A motion of no-confidence is an extreme measure that enables Ada holders to revoke the power that has been granted to the current constitutional committee.
\item A \emph{single} governance action might contain \emph{multiple} protocol parameter updates. Many parameters are inter-connected and might require moving in lockstep.
\end{enumerate}

</a><a id="11086" class="Markup">\begin{code}[hide]</a>
<a id="11105" class="Keyword">instance</a>
  <a id="11116" href="Ledger.GovernanceActions.html#11116" class="Function">_</a> <a id="11118" class="Symbol">=</a> <a id="11120" href="Data.Nat.Properties.html#16466" class="Function">+-0-commutativeMonoid</a>
  <a id="11144" class="Keyword">unquoteDecl</a> <a id="DecEq-GovRole"></a><a id="11156" href="Ledger.GovernanceActions.html#11156" class="Function">DecEq-GovRole</a> <a id="11170" class="Symbol">=</a> <a id="11172" href="Tactic.Derive.DecEq.html#3471" class="Function">derive-DecEq</a> <a id="11185" class="Symbol">((</a><a id="11187" class="Keyword">quote</a> <a id="11193" href="Ledger.GovernanceActions.html#1482" class="Datatype">GovRole</a> <a id="11201" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11203" href="Ledger.GovernanceActions.html#11156" class="Function">DecEq-GovRole</a><a id="11216" class="Symbol">)</a> <a id="11218" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="11220" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="11222" class="Symbol">)</a>
  <a id="11226" class="Keyword">unquoteDecl</a> <a id="DecEq-Vote"></a><a id="11238" href="Ledger.GovernanceActions.html#11238" class="Function">DecEq-Vote</a>    <a id="11252" class="Symbol">=</a> <a id="11254" href="Tactic.Derive.DecEq.html#3471" class="Function">derive-DecEq</a> <a id="11267" class="Symbol">((</a><a id="11269" class="Keyword">quote</a> <a id="11275" href="Ledger.GovernanceActions.html#9022" class="Datatype">Vote</a>    <a id="11283" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11285" href="Ledger.GovernanceActions.html#11238" class="Function">DecEq-Vote</a><a id="11295" class="Symbol">)</a>    <a id="11300" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="11302" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="11304" class="Symbol">)</a>
  <a id="11308" class="Keyword">unquoteDecl</a> <a id="DecEq-VDeleg"></a><a id="11320" href="Ledger.GovernanceActions.html#11320" class="Function">DecEq-VDeleg</a>  <a id="11334" class="Symbol">=</a> <a id="11336" href="Tactic.Derive.DecEq.html#3471" class="Function">derive-DecEq</a> <a id="11349" class="Symbol">((</a><a id="11351" class="Keyword">quote</a> <a id="11357" href="Ledger.GovernanceActions.html#1562" class="Datatype">VDeleg</a>  <a id="11365" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11367" href="Ledger.GovernanceActions.html#11320" class="Function">DecEq-VDeleg</a><a id="11379" class="Symbol">)</a>  <a id="11382" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="11384" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="11386" class="Symbol">)</a>
<a id="11388" class="Markup">\end{code}</a><a id="11398" class="Background">

\subsection{Protocol parameters and governance actions}
\label{sec:protocol-parameters-and-governance-actions}
Recall from Section~\ref{sec:protocol-parameters}, parameters used in the Cardano ledger are grouped according to
the general purpose that each parameter serves (see Figure~\ref{fig:protocol-parameter-declarations}).
Specifically, we have a \AgdaInductiveConstructor{NetworkGroup}, an \AgdaInductiveConstructor{EconomicGroup}, a \AgdaInductiveConstructor{TechnicalGroup}, and
a \AgdaInductiveConstructor{GovernanceGroup}.
This allows voting/ratification thresholds to be set by group, though we do not require that each protocol
parameter governance action be confined to a single group. In case a governance action carries updates
for multiple parameters from different groups, the maximum threshold of all the groups involved will
apply to any given such governance action.

\subsection{Enactment}
\label{sec:enactment}
\defn{Enactment} of a governance action is carried out as an \defn{enact transition}
which requires an \defn{enact environment} %(\AgdaSymbol{:}\,\AgdaRecord{EnactEnv}),
an \defn{enact state} %(\AgdaSymbol{:}\,\AgdaRecord{EnactState})
representing the existing state (prior to enactment), the voted on
governance action (that achieved enough votes to enact), and the state that results from enacting the given
governance action %(\AgdaSymbol{:}\,\AgdaRecord{EnactState})
(see Figure~\ref{fig:enactment-types}).

A record of type \AgdaRecord{EnactEnv} represents the environment for enacting a governance action.
A record of type \AgdaRecord{EnactState} represents the state for enacting a governance action.
The latter contains fields for the constitutional committee, constitution,
protocol version, protocol parameters, withdrawals from treasury, and treasury balance.
\begin{figure*}[h]
{\small
</a><a id="13231" class="Markup">\begin{code}</a>
<a id="13244" class="Keyword">record</a> <a id="EnactEnv"></a><a id="13251" href="Ledger.GovernanceActions.html#13251" class="Record">EnactEnv</a> <a id="13260" class="Symbol">:</a> <a id="13262" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="13266" class="Keyword">where</a>
  <a id="13274" class="Keyword">constructor</a> <a id="⟦_⟧ᵉ"></a><a id="13286" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦_⟧ᵉ</a>
  <a id="13293" class="Keyword">field</a> <a id="EnactEnv.gid"></a><a id="13299" href="Ledger.GovernanceActions.html#13299" class="Field">gid</a>  <a id="13304" class="Symbol">:</a> <a id="13306" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>

<a id="13319" class="Keyword">record</a> <a id="EnactState"></a><a id="13326" href="Ledger.GovernanceActions.html#13326" class="Record">EnactState</a> <a id="13337" class="Symbol">:</a> <a id="13339" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="13343" class="Keyword">where</a>
  <a id="13351" class="Keyword">field</a> <a id="EnactState.cc"></a><a id="13357" href="Ledger.GovernanceActions.html#13357" class="Field">cc</a>            <a id="13371" class="Symbol">:</a> <a id="13373" href="Ledger.GovernanceActions.html#8030" class="Function">HashProtected</a> <a id="13387" class="Symbol">(</a><a id="13388" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="13394" class="Symbol">(</a><a id="13395" href="Ledger.Crypto.html#1812" class="Function">KeyHash</a> <a id="13403" href="Ledger.Prelude.html#2585" class="Function Operator">⇀</a> <a id="13405" href="Ledger.Epoch.html#593" class="Function">Epoch</a> <a id="13411" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="13413" href="Data.Rational.Base.html#1287" class="Record">ℚ</a><a id="13414" class="Symbol">))</a>
        <a id="EnactState.constitution"></a><a id="13425" href="Ledger.GovernanceActions.html#13425" class="Field">constitution</a>  <a id="13439" class="Symbol">:</a> <a id="13441" href="Ledger.GovernanceActions.html#8030" class="Function">HashProtected</a> <a id="13455" href="Ledger.GovernanceActions.html#826" class="Bound">DocHash</a>
        <a id="EnactState.pv"></a><a id="13471" href="Ledger.GovernanceActions.html#13471" class="Field">pv</a>            <a id="13485" class="Symbol">:</a> <a id="13487" href="Ledger.GovernanceActions.html#8030" class="Function">HashProtected</a> <a id="13501" href="Ledger.PParams.html#692" class="Function">ProtVer</a>
        <a id="EnactState.pparams"></a><a id="13517" href="Ledger.GovernanceActions.html#13517" class="Field">pparams</a>       <a id="13531" class="Symbol">:</a> <a id="13533" href="Ledger.GovernanceActions.html#8030" class="Function">HashProtected</a> <a id="13547" href="Ledger.PParams.html#1053" class="Record">PParams</a>
        <a id="EnactState.withdrawals"></a><a id="13563" href="Ledger.GovernanceActions.html#13563" class="Field">withdrawals</a>   <a id="13577" class="Symbol">:</a> <a id="13579" href="Ledger.Address.html#1243" class="Record">RwdAddr</a> <a id="13587" href="Ledger.Prelude.html#2585" class="Function Operator">⇀</a> <a id="13589" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
        <a id="EnactState.treasury"></a><a id="13602" href="Ledger.GovernanceActions.html#13602" class="Field">treasury</a>      <a id="13616" class="Symbol">:</a> <a id="13618" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
<a id="13623" class="Markup">\end{code}</a><a id="13633" class="Background">
} %% end small
\caption{Enactment types}
\label{fig:enactment-types}
\end{figure*}
</a><a id="13717" class="Markup">\begin{code}[hide]</a>
<a id="13736" class="Keyword">open</a> <a id="13741" href="Ledger.GovernanceActions.html#13326" class="Module">EnactState</a>

<a id="13753" class="Keyword">private</a> <a id="13761" class="Keyword">variable</a>
  <a id="13772" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="13774" class="Symbol">:</a> <a id="13776" href="Ledger.GovernanceActions.html#13326" class="Record">EnactState</a>
  <a id="13789" href="Ledger.GovernanceActions.html#13789" class="Generalizable">up</a> <a id="13792" class="Symbol">:</a> <a id="13794" href="Ledger.PParams.html#5197" class="Function">UpdateT</a>
  <a id="13804" href="Ledger.GovernanceActions.html#13804" class="Generalizable">new</a> <a id="13808" class="Symbol">:</a> <a id="13810" href="Ledger.Crypto.html#1812" class="Function">KeyHash</a> <a id="13818" href="Ledger.Prelude.html#2585" class="Function Operator">⇀</a> <a id="13820" href="Ledger.Epoch.html#593" class="Function">Epoch</a>
  <a id="13828" href="Ledger.GovernanceActions.html#13828" class="Generalizable">rem</a> <a id="13832" class="Symbol">:</a> <a id="13834" href="Ledger.Prelude.html#1583" class="Function Operator">ℙ</a> <a id="13836" href="Ledger.Crypto.html#1812" class="Function">KeyHash</a>
  <a id="13846" href="Ledger.GovernanceActions.html#13846" class="Generalizable">q</a> <a id="13848" class="Symbol">:</a> <a id="13850" href="Data.Rational.Base.html#1287" class="Record">ℚ</a>
  <a id="13854" href="Ledger.GovernanceActions.html#13854" class="Generalizable">dh</a> <a id="13857" class="Symbol">:</a> <a id="13859" href="Ledger.GovernanceActions.html#826" class="Bound">DocHash</a>
  <a id="13869" href="Ledger.GovernanceActions.html#13869" class="Generalizable">h</a> <a id="13871" class="Symbol">:</a> <a id="13873" href="Ledger.GovernanceActions.html#1288" class="Function">PPHash</a>
  <a id="13882" href="Ledger.GovernanceActions.html#13882" class="Generalizable">v</a> <a id="13884" class="Symbol">:</a> <a id="13886" href="Ledger.PParams.html#692" class="Function">ProtVer</a>
  <a id="13896" href="Ledger.GovernanceActions.html#13896" class="Generalizable">wdrl</a> <a id="13901" class="Symbol">:</a> <a id="13903" href="Ledger.Address.html#1243" class="Record">RwdAddr</a> <a id="13911" href="Ledger.Prelude.html#2585" class="Function Operator">⇀</a> <a id="13913" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="13920" href="Ledger.GovernanceActions.html#13920" class="Generalizable">newTreasury</a> <a id="13932" class="Symbol">:</a> <a id="13934" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="13941" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="13945" class="Symbol">:</a> <a id="13947" href="Ledger.GovernanceActions.html#1435" class="Function">GovActionID</a>

<a id="13960" class="Keyword">instance</a>
  <a id="13971" href="Ledger.GovernanceActions.html#13971" class="Function">_</a> <a id="13973" class="Symbol">=</a> <a id="13975" href="Data.Nat.Properties.html#16387" class="Function">+-0-monoid</a>

<a id="13987" class="Keyword">data</a>
<a id="13992" class="Markup">\end{code}</a><a id="14002" class="Background">

The relation \verb!_⊢_⇀⦇_,ENACT⦈_! is the transition relation for enacting a governance action.
It represents how the \AgdaBound{EnactState} changes when a specific governance action is enacted
(see Figure~\ref{fig:enact-transition-system}).
\begin{figure*}[h]
{\small
</a><a id="14273" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_"></a><a id="14288" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">_⊢_⇀⦇_,ENACT⦈_</a> <a id="14303" class="Symbol">:</a> <a id="14305" href="Ledger.GovernanceActions.html#13251" class="Record">EnactEnv</a> <a id="14314" class="Symbol">→</a> <a id="14316" href="Ledger.GovernanceActions.html#13326" class="Record">EnactState</a> <a id="14327" class="Symbol">→</a> <a id="14329" href="Ledger.GovernanceActions.html#1770" class="Datatype">GovAction</a> <a id="14339" class="Symbol">→</a> <a id="14341" href="Ledger.GovernanceActions.html#13326" class="Record">EnactState</a> <a id="14352" class="Symbol">→</a> <a id="14354" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="14358" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_.Enact-NoConf"></a><a id="14366" href="Ledger.GovernanceActions.html#14366" class="InductiveConstructor">Enact-NoConf</a>    <a id="14382" class="Symbol">:</a> <a id="14384" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦</a> <a id="14386" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14390" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟧ᵉ</a> <a id="14393" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⊢</a> <a id="14395" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14397" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⇀⦇</a> <a id="14400" href="Ledger.GovernanceActions.html#1794" class="InductiveConstructor">NoConfidence</a> <a id="14413" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">,ENACT⦈</a>  <a id="14422" class="Keyword">record</a> <a id="14429" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14431" class="Symbol">{</a> <a id="14433" href="Ledger.GovernanceActions.html#13357" class="Field">cc</a> <a id="14436" class="Symbol">=</a> <a id="14438" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a> <a id="14446" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14448" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14452" class="Symbol">}</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_.Enact-NewComm"></a><a id="14456" href="Ledger.GovernanceActions.html#14456" class="InductiveConstructor">Enact-NewComm</a>   <a id="14472" class="Symbol">:</a> <a id="14474" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦</a> <a id="14476" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14480" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟧ᵉ</a> <a id="14483" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⊢</a> <a id="14485" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14487" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⇀⦇</a> <a id="14490" href="Ledger.GovernanceActions.html#1860" class="InductiveConstructor">NewCommittee</a> <a id="14503" href="Ledger.GovernanceActions.html#13804" class="Generalizable">new</a> <a id="14507" href="Ledger.GovernanceActions.html#13828" class="Generalizable">rem</a> <a id="14511" href="Ledger.GovernanceActions.html#13846" class="Generalizable">q</a> <a id="14513" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">,ENACT⦈</a> <a id="14521" class="Keyword">let</a>
    <a id="14529" href="Ledger.GovernanceActions.html#14529" class="Bound">old</a> <a id="14533" class="Symbol">=</a> <a id="14535" href="Data.Maybe.Base.html#1377" class="Function">maybe</a> <a id="14541" href="Data.Product.Base.html#608" class="Field">proj₁</a> <a id="14547" href="Axiom.Set.Map.html#2707" class="Function">∅ᵐ</a> <a id="14550" class="Symbol">(</a><a id="14551" href="Data.Product.Base.html#608" class="Field">proj₁</a> <a id="14557" class="Symbol">(</a><a id="14558" href="Ledger.GovernanceActions.html#13357" class="Field">EnactState.cc</a> <a id="14572" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a><a id="14573" class="Symbol">))</a>
    <a id="14580" class="Keyword">in</a> <a id="14583" class="Keyword">record</a> <a id="14590" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14592" class="Symbol">{</a> <a id="14594" href="Ledger.GovernanceActions.html#13357" class="Field">cc</a> <a id="14597" class="Symbol">=</a> <a id="14599" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="14604" class="Symbol">((</a><a id="14606" href="Ledger.GovernanceActions.html#13804" class="Generalizable">new</a> <a id="14610" href="Axiom.Set.Map.html#4684" class="Function Operator">∪ᵐˡ</a> <a id="14614" href="Ledger.GovernanceActions.html#14529" class="Bound">old</a><a id="14617" class="Symbol">)</a> <a id="14619" href="Axiom.Set.Map.html#8482" class="Function Operator">∣</a> <a id="14621" href="Ledger.GovernanceActions.html#13828" class="Generalizable">rem</a> <a id="14625" href="Axiom.Set.Map.html#8482" class="Function Operator">ᶜ</a> <a id="14627" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14629" href="Ledger.GovernanceActions.html#13846" class="Generalizable">q</a><a id="14630" class="Symbol">)</a> <a id="14632" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14634" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14638" class="Symbol">}</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_.Enact-NewConst"></a><a id="14642" href="Ledger.GovernanceActions.html#14642" class="InductiveConstructor">Enact-NewConst</a>  <a id="14658" class="Symbol">:</a> <a id="14660" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦</a> <a id="14662" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14666" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟧ᵉ</a> <a id="14669" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⊢</a> <a id="14671" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14673" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⇀⦇</a> <a id="14676" href="Ledger.GovernanceActions.html#1926" class="InductiveConstructor">NewConstitution</a> <a id="14692" href="Ledger.GovernanceActions.html#13854" class="Generalizable">dh</a> <a id="14695" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">,ENACT⦈</a>  <a id="14704" class="Keyword">record</a> <a id="14711" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14713" class="Symbol">{</a> <a id="14715" href="Ledger.GovernanceActions.html#13425" class="Field">constitution</a> <a id="14728" class="Symbol">=</a> <a id="14730" href="Ledger.GovernanceActions.html#13854" class="Generalizable">dh</a> <a id="14733" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14735" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14739" class="Symbol">}</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_.Enact-HF"></a><a id="14743" href="Ledger.GovernanceActions.html#14743" class="InductiveConstructor">Enact-HF</a>        <a id="14759" class="Symbol">:</a> <a id="14761" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦</a> <a id="14763" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14767" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟧ᵉ</a> <a id="14770" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⊢</a> <a id="14772" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14774" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⇀⦇</a> <a id="14777" href="Ledger.GovernanceActions.html#1992" class="InductiveConstructor">TriggerHF</a> <a id="14787" href="Ledger.GovernanceActions.html#13882" class="Generalizable">v</a> <a id="14789" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">,ENACT⦈</a>  <a id="14798" class="Keyword">record</a> <a id="14805" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14807" class="Symbol">{</a> <a id="14809" href="Ledger.GovernanceActions.html#13471" class="Field">pv</a> <a id="14812" class="Symbol">=</a> <a id="14814" href="Ledger.GovernanceActions.html#13882" class="Generalizable">v</a> <a id="14816" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14818" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14822" class="Symbol">}</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_.Enact-PParams"></a><a id="14826" href="Ledger.GovernanceActions.html#14826" class="InductiveConstructor">Enact-PParams</a>   <a id="14842" class="Symbol">:</a> <a id="14844" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦</a> <a id="14846" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14850" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟧ᵉ</a> <a id="14853" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⊢</a> <a id="14855" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14857" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⇀⦇</a> <a id="14860" href="Ledger.GovernanceActions.html#2058" class="InductiveConstructor">ChangePParams</a> <a id="14874" href="Ledger.GovernanceActions.html#13789" class="Generalizable">up</a> <a id="14877" href="Ledger.GovernanceActions.html#13869" class="Generalizable">h</a>  <a id="14880" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">,ENACT⦈</a>
    <a id="14892" class="Keyword">record</a> <a id="14899" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14901" class="Symbol">{</a> <a id="14903" href="Ledger.GovernanceActions.html#13517" class="Field">pparams</a> <a id="14911" class="Symbol">=</a> <a id="14913" href="Ledger.PParams.html#5266" class="Function">applyUpdate</a> <a id="14925" class="Symbol">(</a><a id="14926" href="Data.Product.Base.html#608" class="Field">proj₁</a> <a id="14932" class="Symbol">(</a><a id="14933" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="14935" class="Symbol">.</a><a id="14936" href="Ledger.GovernanceActions.html#13517" class="Field">pparams</a><a id="14943" class="Symbol">))</a> <a id="14946" href="Ledger.GovernanceActions.html#13789" class="Generalizable">up</a> <a id="14949" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="14951" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="14955" class="Symbol">}</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_.Enact-Wdrl"></a><a id="14959" href="Ledger.GovernanceActions.html#14959" class="InductiveConstructor">Enact-Wdrl</a>      <a id="14975" class="Symbol">:</a>
    <a id="14981" class="Keyword">let</a> <a id="14985" href="Ledger.GovernanceActions.html#14985" class="Bound">newWdrls</a> <a id="14994" class="Symbol">=</a> <a id="14996" href="Axiom.Set.Sum.html#4295" class="Function">Σᵐᵛ[</a> <a id="15001" href="Ledger.GovernanceActions.html#15001" class="Bound">x</a> <a id="15003" href="Axiom.Set.Sum.html#4295" class="Function">←</a> <a id="15005" href="Ledger.GovernanceActions.html#13896" class="Generalizable">wdrl</a> <a id="15010" href="Ledger.Prelude.html#3640" class="Function Operator">ᶠᵐ</a> <a id="15013" href="Axiom.Set.Sum.html#4295" class="Function">]</a> <a id="15015" href="Ledger.GovernanceActions.html#15001" class="Bound">x</a>
    <a id="15021" class="Keyword">in</a> <a id="15024" href="Ledger.GovernanceActions.html#14985" class="Bound">newWdrls</a> <a id="15033" href="Data.Nat.Base.html#1535" class="Datatype Operator">≤</a> <a id="15035" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="15037" class="Symbol">.</a><a id="15038" href="Ledger.GovernanceActions.html#13602" class="Field">treasury</a>
    <a id="15051" href="Interface.STS.html#211" class="Function Operator">────────────────────────────────</a>
    <a id="15088" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦</a> <a id="15090" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="15094" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟧ᵉ</a> <a id="15097" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⊢</a> <a id="15099" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="15101" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⇀⦇</a> <a id="15104" href="Ledger.GovernanceActions.html#2124" class="InductiveConstructor">TreasuryWdrl</a> <a id="15117" href="Ledger.GovernanceActions.html#13896" class="Generalizable">wdrl</a>  <a id="15123" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">,ENACT⦈</a>
      <a id="15137" class="Keyword">record</a> <a id="15144" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="15146" class="Symbol">{</a> <a id="15148" href="Ledger.GovernanceActions.html#13563" class="Field">withdrawals</a>  <a id="15161" class="Symbol">=</a> <a id="15163" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="15165" class="Symbol">.</a><a id="15166" href="Ledger.GovernanceActions.html#13563" class="Field">withdrawals</a>  <a id="15179" href="Axiom.Set.Map.Dec.html#1962" class="Function Operator">∪⁺</a> <a id="15182" href="Ledger.GovernanceActions.html#13896" class="Generalizable">wdrl</a>
               <a id="15202" class="Symbol">;</a> <a id="15204" href="Ledger.GovernanceActions.html#13602" class="Field">treasury</a>     <a id="15217" class="Symbol">=</a> <a id="15219" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="15221" class="Symbol">.</a><a id="15222" href="Ledger.GovernanceActions.html#13602" class="Field">treasury</a>     <a id="15235" href="Data.Nat.Base.html#3202" class="Primitive Operator">∸</a>  <a id="15238" href="Ledger.GovernanceActions.html#14985" class="Bound">newWdrls</a> <a id="15247" class="Symbol">}</a>
  <a id="_⊢_⇀⦇_,ENACT⦈_.Enact-Info"></a><a id="15251" href="Ledger.GovernanceActions.html#15251" class="InductiveConstructor">Enact-Info</a>      <a id="15267" class="Symbol">:</a> <a id="15269" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟦</a> <a id="15271" href="Ledger.GovernanceActions.html#13941" class="Generalizable">gid</a> <a id="15275" href="Ledger.GovernanceActions.html#13286" class="InductiveConstructor Operator">⟧ᵉ</a> <a id="15278" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⊢</a> <a id="15280" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a> <a id="15282" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">⇀⦇</a> <a id="15285" href="Ledger.GovernanceActions.html#2190" class="InductiveConstructor">Info</a>  <a id="15291" href="Ledger.GovernanceActions.html#14288" class="Datatype Operator">,ENACT⦈</a> <a id="15299" href="Ledger.GovernanceActions.html#13772" class="Generalizable">s</a>
<a id="15301" class="Markup">\end{code}</a><a id="15311" class="Background">
} %% end small
\caption{ENACT transition system}
\label{fig:enact-transition-system}
\end{figure*}
</a></pre></body></html>